<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="dashboard-title">إحصائيات التذاكر</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
      <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous"
  />
    <link rel="stylesheet" href="../css/shared.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <style>
        /* إخفاء المحتوى حتى يتم تحميل اللغة */
        .content-hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
        }

        .content-visible {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
 <header class="main-header content-hidden">
    <div class="header-container">
      <div class="system-title">
          <img src="/frontend/images/system-title.png" alt="نظام إدارة الجودة والسلامة">
  </div>
       <div class="hospital-logo">
                <img src="/frontend/images/hospital-logo.png" alt="شعار مستشفى الملك عبد العزيز">
            </div>
    </div>
  </header>
    <div class="header-actions content-hidden">
        <button class="back-btn" onclick="history.back()">
     <i class="fas fa-arrow-right" id="backIcon"></i>            <span data-translate="back">رجوع</span>
        </button>
        <button class="home-btn" onclick="window.location.href='index.html'">
            <i class="fas fa-home"></i>
            <span data-translate="home">الرئيسية</span>
        </button>
    </div>
    <main class="content-hidden">
 
        <div class="container">
           <div class="dashboard-header">
             <h2 data-translate="dashboard-overview"> قائمة الاحصائيات</h2>
             <button class="export-excel-btn" onclick="exportDashboardToExcel()">
                               <i class="fas fa-file-excel"></i>
                               <span data-translate="export-excel">تصدير Excel</span>
             </button>
           </div>
<div class="stats-grid">

  <!-- بطاقة: التذاكر المغلقة -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-2">
      <i class="fas fa-check-circle fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="closed-tickets">التذاكر المغلقة</div>
      <div class="stat-value" id="closed-tickets"></div>
    </div>
  </div>

  <!-- بطاقة: التذاكر الجديدة -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-3">
      <i class="fas fa-plus-circle fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="new-tickets">التذاكر الجديدة</div>
      <div class="stat-value" id="new-tickets"></div>
    </div>
  </div>

  <!-- المستخدمين -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-4">
      <i class="fas fa-users fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="total-users">عدد المستخدمين</div>
      <div class="stat-value" id="total-users"></div>
    </div>
  </div>

  <!-- المشرفين -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-5">
      <i class="fas fa-user-shield fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="admin-count">عدد المشرفين</div>
      <div class="stat-value" id="admin-count"></div>
    </div>
  </div>

  <!-- محتويات قيد الاعتماد -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-6">
      <i class="fas fa-hourglass-half fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="pending-contents">محتويات بانتظار الاعتماد</div>
      <div class="stat-value" id="pending-contents"></div>
    </div>
  </div>

  <!-- محتويات معتمدة -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-7">
      <i class="fas fa-check fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="approved-contents">محتويات معتمدة</div>
      <div class="stat-value" id="approved-contents"></div>
    </div>
  </div>

  <!-- عدد اللجان -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-8">
      <i class="fas fa-users-cog fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="committee-count">عدد اللجان</div>
      <div class="stat-value" id="committee-count"></div>
    </div>
  </div>

  <!-- محتويات اللجان بانتظار الاعتماد -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-9">
      <i class="fas fa-clock fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="pending-committee-contents">محتويات اللجان (قيد الاعتماد)</div>
      <div class="stat-value" id="pending-committee-contents"></div>
    </div>
  </div>

  <!-- إجمالي المحاضر -->
  <div class="stat-card">
    <div class="stat-icon gradient-blue-10">
      <i class="fas fa-file-alt fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="total-protocols">إجمالي المحاضر</div>
      <div class="stat-value" id="total-protocols"></div>
    </div>
  </div>

  <!-- محاضر بانتظار الاعتماد -->
  <div class="stat-card">
    <div class="stat-icon gradient-orange-1">
      <i class="fas fa-hourglass-half fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="pending-protocols">محاضر بانتظار الاعتماد</div>
      <div class="stat-value" id="pending-protocols"></div>
    </div>
  </div>

  <!-- المحاضر المعتمدة -->
  <div class="stat-card">
    <div class="stat-icon gradient-green-1">
      <i class="fas fa-check-circle fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="approved-protocols">المحاضر المعتمدة</div>
      <div class="stat-value" id="approved-protocols"></div>
    </div>
  </div>

  <!-- المحاضر المرفوضة -->
  <div class="stat-card">
    <div class="stat-icon gradient-red-1">
      <i class="fas fa-times-circle fa-2x text-white"></i>
    </div>
    <div class="stat-info">
      <div class="stat-label" data-translate="rejected-protocols">المحاضر المرفوضة</div>
      <div class="stat-value" id="rejected-protocols"></div>
    </div>
  </div>

</div>





            <h2 data-translate="closed-last-7days">التذاكر المغلقة خلال آخر 7 أيام</h2>
            <div class="chart-container" data-section="tickets">
                <canvas id="ticketsChart"></canvas>
            </div>

            <!-- قسم إحصائيات الأقسام -->
            <div class="charts-section">
                <h2 data-translate="department-statistics">إحصائيات الأقسام</h2>
                <div class="charts-grid">
                    <div class="chart-container" data-section="departments">
                        <h3 data-translate="department-approval-rate">معدل اعتماد الأقسام</h3>
                        <canvas id="departmentChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3 data-translate="department-performance">أداء الأقسام الشهري</h3>
                        <canvas id="departmentPerformanceChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- قسم إحصائيات اللجان -->
            <div class="charts-section">
                <h2 data-translate="committee-statistics">إحصائيات اللجان</h2>
                <div class="charts-grid">
                    <div class="chart-container" data-section="committees">
                        <h3 data-translate="committee-approval-status">حالة اعتماد اللجان</h3>
                        <canvas id="committeeChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3 data-translate="committee-performance">أداء اللجان</h3>
                        <canvas id="committeePerformanceChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- قسم إحصائيات المحاضر -->
            <div class="charts-section">
                <h2 data-translate="protocol-statistics">إحصائيات المحاضر</h2>
                <div class="chart-container" data-section="protocols">
                    <h3 data-translate="protocol-status-distribution">توزيع حالات المحاضر</h3>
                    <canvas id="protocolChart"></canvas>
                </div>
            </div>

            <!-- قسم التحليل الشهري -->
            <div class="charts-section">
                <h2 data-translate="monthly-analysis">التحليل الشهري</h2>
                <div class="chart-container full-width" data-section="monthly">
                    <h3 data-translate="monthly-trends">الاتجاهات الشهرية للمحتويات</h3>
                    <canvas id="monthlyTrendsChart"></canvas>
                </div>
            </div>
        </div>
    </main>
    <script src="../js/language.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/dashboard.js"></script>
<script src="../js/check-status.js"></script>
<script src="../js/utils.js"></script>    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // إظهار المحتوى بعد تحميل اللغة
            setTimeout(() => {
                const elements = document.querySelectorAll('.content-hidden');
                elements.forEach(element => {
                    element.classList.remove('content-hidden');
                    element.classList.add('content-visible');
                });
            }, 100);
        });
    </script>
          <div id="toast-container" class="toast-container"></div>

</body>
</html> 
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-translate="create-ticket-page-title">نظام إدارة الجودة والسلامة - إنشاء تذكرة</title>

  <!-- استيراد خط "Tajawal" من Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/shared.css"/>

  <!-- ربط ملف التنسيقات -->
  <link rel="stylesheet" href="/frontend/css/ticket.css" />

</head>
<body>
  <!-- الهيدر العلوي -->
  <header class="main-header">
    <div class="header-container">
      <div class="system-title">
        <img src="/frontend/images/system-title.png" alt="نظام إدارة الجودة والسلامة">
      </div>
      <div class="hospital-logo">
        <img src="/frontend/images/hospital-logo.png" alt="شعار مستشفى الملك عبد العزيز">
      </div>
    </div>
  </header>
  <div class="header-actions">
    <button class="back-btn" onclick="history.back()">
     <i class="fas fa-arrow-right" id="backIcon"></i>      <span data-translate="back">رجوع</span>
    </button>
    <button class="home-btn" onclick="window.location.href='index.html'">
      <i class="fas fa-home"></i>
      <span data-translate="home">الرئيسية</span>
    </button>
  </div>
  <!-- المحتوى الرئيسي -->
  <main class="content-wrapper">
    <h1 class="page-title" data-translate="create-ticket">إنشاء تذكرة</h1>

    <form id="ticketForm" class="ticket-form" autocomplete="off">

      <!-- ===== قسم: وقت وموقع الحدث ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-time-location">وقت وموقع الحدث</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group required">
              <label for="eventDate" data-translate="event-date">تاريخ الحدث</label>
              <input type="date" id="eventDate" name="eventDate" placeholder="yyyy/mm/dd" data-translate-placeholder="placeholder-date" required />
            </div>
            <div class="form-group time-group required">
              <label data-translate="event-time">وقت الحدث</label>
              <div class="time-options">
                <input type="radio" id="timeMorning" name="eventTime" value="صباحاً" required />
                <label for="timeMorning" data-translate="morning">صباحاً</label>
                <input type="radio" id="timeEvening" name="eventTime" value="مساءً" />
                <label for="timeEvening" data-translate="evening">مساءً</label>
              </div>
            </div>
          </div>

          <div class="form-group full-width required">
            <label for="eventLocation" data-translate="event-location">موقع الحدث</label>
            <input type="text" id="eventLocation" name="eventLocation" placeholder="ادخل موقع الحدث هنا" data-translate-placeholder="placeholder-event-location" required />
          </div>

          <div class="row">
            <div class="form-group required">
              <label for="reportingDept" data-translate="reporting-dept">القسم المبلغ</label>
              <select id="reportingDept" name="reportingDept" required>
<option value="" disabled selected data-translate="placeholder-select-dept">اختر القسم</option>
              </select>
            </div>
            <div class="form-group required">
              <label for="respondingDept" data-translate="responding-dept">القسم المستجيب</label>
              <select id="respondingDept" name="respondingDept" required>
<option value="" disabled selected data-translate="placeholder-select-dept">اختر القسم</option>
              </select>
            </div>
          </div>

          <div class="form-group full-width required">
            <label for="otherDepts" data-translate="other-depts">الأقسام الأخرى المعنية</label>
            <textarea id="otherDepts" name="otherDepts" rows="3" placeholder="إذا وجد، اذكر الأقسام الأخرى" data-translate-placeholder="placeholder-other-depts" required></textarea>
          </div>
        </div>
      </section>

      <!-- ===== قسم: معلومات المريض (غير إلزامي) ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="patient-info">معلومات المريض</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group">
              <label for="patientName" data-translate="patient-name">اسم المريض</label>
              <input type="text" id="patientName" name="patientName" placeholder="ادخل اسم المريض" data-translate-placeholder="placeholder-patient-name" />
            </div>
            <div class="form-group">
              <label for="medicalRecordNo" data-translate="medical-record">رقم الملف الطبي</label>
              <input type="text" id="medicalRecordNo" name="medicalRecordNo" placeholder="ادخل رقم الملف الطبي" data-translate-placeholder="placeholder-medical-record" />
            </div>
          </div>
          <div class="row">
            <div class="form-group">
              <label for="dob" data-translate="dob">تاريخ الميلاد</label>
              <input type="date" id="dob" name="dob" placeholder="yyyy/mm/dd" data-translate-placeholder="placeholder-date" />
            </div>
            <div class="form-group gender-group">
              <label data-translate="gender">الجنس</label>
              <div class="gender-options">
                <input type="radio" id="genderMale" name="gender" value="ذكر" />
                <label for="genderMale" data-translate="male">ذكر</label>
                <input type="radio" id="genderFemale" name="gender" value="أنثى" />
                <label for="genderFemale" data-translate="female">أنثى</label>
              </div>
            </div>
          </div>
          <div class="form-group patient-type-group">
            <label data-translate="patient-type">نوع المريض</label>
            <div class="checkbox-options">
              <div><input type="checkbox" id="typeInpatient" name="patientType" value="منوم" /><label for="typeInpatient" data-translate="inpatient">منوم</label></div>
              <div><input type="checkbox" id="typeOutpatient" name="patientType" value="مراجع" /><label for="typeOutpatient" data-translate="outpatient">مراجع</label></div>
              <div><input type="checkbox" id="typeStaff" name="patientType" value="موظف" /><label for="typeStaff" data-translate="staff">موظف</label></div>
              <div><input type="checkbox" id="typeVisitor" name="patientType" value="زائر" /><label for="typeVisitor" data-translate="visitor">زائر</label></div>
              <div><input type="checkbox" id="typeOther" name="patientType" value="أخرى" /><label for="typeOther" data-translate="other">أخرى</label></div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== قسم: نوع البلاغ ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="report-type">نوع البلاغ</h2>
        <div class="section-content">
          <div class="form-group required radio-group full-width">
            <label data-translate="select-report-type">اختر نوع البلاغ</label>
            <div class="radio-options report-type-grid">
              <div>
                <input type="radio" id="reportCapacityToCauseError" name="reportType" value="capacity-to-cause-error" required />
                <label for="reportCapacityToCauseError" data-translate="capacity-to-cause-error">الظروف أو الأحداث التي لديها القدرة على التسبب في حدوث خطأ.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorNoPatient" name="reportType" value="error-no-patient" />
                <label for="reportErrorNoPatient" data-translate="error-no-patient">حدث خطأ ولكن لم يصل أثره إلى المريض.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorNoHarm" name="reportType" value="error-no-harm" />
                <label for="reportErrorNoHarm" data-translate="error-no-harm">حدث خطأ وصل أثره إلى المريض ولكن لم يسبب ضرراً له.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorMonitor" name="reportType" value="error-monitor" />
                <label for="reportErrorMonitor" data-translate="error-monitor">حدث خطأ وصل أثره إلى المريض وتطلب المتابعة للتأكد من عدم تسببه في ضرر بالمريض أو تطلب التدخل لمنع الضرر أو الإجراءات معاً.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorMinorHarm" name="reportType" value="error-minor-harm" />
                <label for="reportErrorMinorHarm" data-translate="error-minor-harm">حدث خطأ قد يكون قد أسهم في حدوث ضرر مؤقت للمريض أو أدى إلى ذلك وتطلب التدخل.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorMinorHarmHospital" name="reportType" value="error-minor-harm-hospital" />
                <label for="reportErrorMinorHarmHospital" data-translate="error-minor-harm-hospital">حدث خطأ قد يكون قد أسهم في حدوث ضرر مؤقت للمريض أو أدى إلى ذلك وتطلب التنويم بالمستشفى لفترات بسيطة أو لفترات طويلة.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorSeriousHarm" name="reportType" value="error-serious-harm" />
                <label for="reportErrorSeriousHarm" data-translate="error-serious-harm">حدث خطأ قد يكون قد أسهم في ضرر دائم للمريض أو أدى إلى ذلك الضرر.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorLifeThreatening" name="reportType" value="error-life-threatening" />
                <label for="reportErrorLifeThreatening" data-translate="error-life-threatening">حدث خطأ يتطلب التدخل الضروري لإنقاذ الحياة.</label>
              </div>
              <div>
                <input type="radio" id="reportErrorDeath" name="reportType" value="error-death" />
                <label for="reportErrorDeath" data-translate="error-death">حدث خطأ قد يكون قد أسهم في وفاة المريض أو أدى إلى وفاته.</label>
              </div>
            </div>
          </div>
          <div class="form-group full-width">
            <label for="reportShortDesc" data-translate="event-description">وصف الحدث (اختياري)</label>
            <input type="text" id="reportShortDesc" name="reportShortDesc" placeholder="أي تفاصيل قصيرة عن الحدث" data-translate-placeholder="placeholder-short-desc" />
          </div>
        </div>
      </section>

      <!-- ===== قسم: وصف الحدث ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-description">وصف الحدث</h2>
        <div class="section-content">
          <div class="form-group full-width required">
            <label for="eventDescription" data-translate="event-description">وصف مفصل للحدث</label>
            <textarea id="eventDescription" name="eventDescription" rows="5" placeholder="اكتب وصفاً مفصلاً للحدث هنا" data-translate-placeholder="placeholder-event-description" required></textarea>
          </div>
        </div>
      </section>

      <!-- ===== قسم: معلومات المبلغ ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="reporter-info">معلومات المبلغ</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group required">
              <label for="reporterName" data-translate="reporter-name">اسم المبلغ</label>
              <input type="text" id="reporterName" name="reporterName" placeholder="ادخل اسم المبلغ" data-translate-placeholder="placeholder-reporter-name" required />
            </div>
            <div class="form-group required">
              <label for="reportDate" data-translate="report-date">تاريخ الإبلاغ</label>
              <input type="date" id="reportDate" name="reportDate" placeholder="yyyy/mm/dd" data-translate-placeholder="placeholder-date" required />
            </div>
          </div>
          <div class="row">
            <div class="form-group required">
              <label for="reporterPosition" data-translate="reporter-position">المسمي الوظيفي</label>
              <input type="text" id="reporterPosition" name="reporterPosition" placeholder="ادخل المسمي الوظيفي" data-translate-placeholder="placeholder-reporter-position" required />
            </div>
            <div class="form-group required">
              <label for="reporterPhone" data-translate="reporter-phone">رقم الجوال</label>
              <input type="tel" id="reporterPhone" name="reporterPhone" placeholder="05XXXXXXXX" data-translate-placeholder="placeholder-phone" required />
            </div>
          </div>
          <div class="form-group full-width required">
            <label for="reporterEmail" data-translate="reporter-email">البريد الإلكتروني</label>
            <input type="email" id="reporterEmail" name="reporterEmail" placeholder="example@domain.com" data-translate-placeholder="placeholder-email" required />
          </div>
        </div>
      </section>

      <!-- ===== قسم: الإجراءات المتخذة ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="actions-taken">الإجراءات المتخذة</h2>
        <div class="section-content">
          <div class="form-group full-width required">
            <label for="actionsTaken" data-translate="actions-taken">صف الإجراءات التي تم اتخاذها</label>
            <textarea id="actionsTaken" name="actionsTaken" rows="4" placeholder="صف الإجراءات التي تم اتخاذها" data-translate-placeholder="placeholder-actions" required></textarea>
          </div>
        </div>
      </section>

      <!-- ===== قسم: تصنيف الحدث ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-classification">تصنيف الحدث</h2>
        <div class="section-content">
          <div class="form-group required full-width">
            <label data-translate="event-classification">اختر تصنيف الحدث (واحد على الأقل)</label>
            <div class="classification-grid">
              <div class="checkbox-item">
                <input type="checkbox" id="catSecurity" name="classification" value="الأمور المتعلقة بالأمن" />
                <label for="catSecurity" data-translate="security-issues">الأمور المتعلقة بالأمن</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catBehaviour" name="classification" value="السلوك" />
                <label for="catBehaviour" data-translate="behaviour">السلوك</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catStaff" name="classification" value="الأمور المتعلقة بالموظفين" />
                <label for="catStaff" data-translate="staff-issues">الأمور المتعلقة بالموظفين</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catPatientCare" name="classification" value="إدارة رعاية المرضى" />
                <label for="catPatientCare" data-translate="patient-care-management">إدارة رعاية المرضى</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catLab" name="classification" value="الأمور المتعلقة بالمختبرات الطبية" />
                <label for="catLab" data-translate="lab-issues">الأمور المتعلقة بالمختبرات الطبية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catProcedural" name="classification" value="الأمور المتعلقة بالإجراءات" />
                <label for="catProcedural" data-translate="procedural">الأمور المتعلقة بالإجراءات</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catMedEquip" name="classification" value="مشكلات الأجهزة الطبية" />
                <label for="catMedEquip" data-translate="medical-equipment-issues">مشكلات الأجهزة الطبية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catFacilityMaintenance" name="classification" value="صيانة المنشآت الصحية" />
                <label for="catFacilityMaintenance" data-translate="facility-maintenance">صيانة المنشآت الصحية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catEnvironmentSafety" name="classification" value="السلامة البيئية" />
                <label for="catEnvironmentSafety" data-translate="environment-safety">السلامة البيئية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catAccommodation" name="classification" value="الأمور المتعلقة بالإقامة والسكن" />
                <label for="catAccommodation" data-translate="accommodation-issues">الأمور المتعلقة بالإقامة والسكن</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catIT" name="classification" value="االأمور المتعلقة بتقنية المعلومات" />
                <label for="catIT" data-translate="it-issues">االأمور المتعلقة بتقنية المعلومات</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catImaging" name="classification" value="التصوير الطبي والإجراءات التشخيصية" />
                <label for="catImaging" data-translate="medical-imaging-diagnostic">التصوير الطبي والإجراءات التشخيصية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catFoodServices" name="classification" value="خدمات التغذية" />
                <label for="catFoodServices" data-translate="food-services">خدمات التغذية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catClinicalNutrition" name="classification" value="التغذية السريرية" />
                <label for="catClinicalNutrition" data-translate="clinical-nutrition">التغذية السريرية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catInfectionControl" name="classification" value="الأمور ذات العلاقة بمكافحة العدوى" />
                <label for="catInfectionControl" data-translate="infection-control-issues">الأمور ذات العلاقة بمكافحة العدوى</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catOccupationalHealth" name="classification" value="الصحة المهنية" />
                <label for="catOccupationalHealth" data-translate="occupational-health">الصحة المهنية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catHousekeeping" name="classification" value="الخدمة والتنظيف" />
                <label for="catHousekeeping" data-translate="housekeeping">الخدمة والتنظيف</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catIV" name="classification" value="أمور متعلقة بالحقن الوريدي" />
                <label for="catIV" data-translate="intravenous">أمور متعلقة بالحقن الوريدي</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catPressureUlcer" name="classification" value="تقرحات السرير (إصابة)" />
                <label for="catPressureUlcer" data-translate="pressure-ulcer">تقرحات السرير (إصابة)</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catSkinLesions" name="classification" value="أمور متعلقة بسلامة الجلد / الإصابات الجلدية" />
                <label for="catSkinLesions" data-translate="skin-lesions">أمور متعلقة بسلامة الجلد / الإصابات الجلدية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catMedication" name="classification" value="الأدوية" />
                <label for="catMedication" data-translate="medication">الأدوية</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catCommunication" name="classification" value="أمور متعلقة بالتواصل" />
                <label for="catCommunication" data-translate="communication-issues">أمور متعلقة بالتواصل</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catFall" name="classification" value="السقوط" />
                <label for="catFall" data-translate="fall">السقوط</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catRadiation" name="classification" value="العلاج الإشعاعي (الأمور المتعلقة بالأشعة)" />
                <label for="catRadiation" data-translate="radiation-treatment">العلاج الإشعاعي (الأمور المتعلقة بالأشعة)</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catLaborDelivery" name="classification" value="الأمور المتعلقة بالولادة وألم الولادة" />
                <label for="catLaborDelivery" data-translate="labor-delivery-issues">الأمور المتعلقة بالولادة وألم الولادة</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catSupplyChain" name="classification" value="الأمور المتعلقة بسلاسل الإمداد" />
                <label for="catSupplyChain" data-translate="supply-chain-issues">الأمور المتعلقة بسلاسل الإمداد</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catLaundry" name="classification" value="خدمات مغسلة الملاءات" />
                <label for="catLaundry" data-translate="laundry-services">خدمات مغسلة الملاءات</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catSentinelEvents" name="classification" value="الأحداث الجسيمة" />
                <label for="catSentinelEvents" data-translate="sentinel-events">الأحداث الجسيمة</label>
              </div>
              <div class="checkbox-item">
                <input type="checkbox" id="catIDDocs" name="classification" value="الهوية / المستندات والوثائق / الإقرارات" />
                <label for="catIDDocs" data-translate="id-docs-consent">الهوية / المستندات والوثائق / الإقرارات</label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== قسم: تفاصيل الإصابة (غير إلزامي) ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="injury-details">تفاصيل الإصابة</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group">
              <label data-translate="had-injury">هل حدثت إصابة؟</label>
              <div class="radio-options">
                <input type="radio" id="injuryYes" name="hadInjury" value="نعم" />
                <label for="injuryYes" data-translate="yes">نعم</label>
                <input type="radio" id="injuryNo" name="hadInjury" value="لا" />
                <label for="injuryNo" data-translate="no">لا</label>
              </div>
            </div>
            <div class="form-group full-width">
              <label data-translate="injury-type">نوع الإصابة</label>
              <div class="radio-options">
                <input type="radio" id="injuryPhysical" name="injuryType" value="جسدية" />
                <label for="injuryPhysical" data-translate="physical">جسدية</label>
                <input type="radio" id="injuryPsychic" name="injuryType" value="نفسية" />
                <label for="injuryPsychic" data-translate="psychic">نفسية</label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ===== قسم: رفع المرفقات (اختياري) ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="attachments">المرفقات</h2>
        <div class="section-content">
          <div class="form-group full-width">
            <label for="attachments" data-translate="upload-attachments">رفع المرفقات</label>
            <input type="file" id="attachments" name="attachments" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx" />
            <small data-translate="upload-hint">يمكنك رفع أكثر من ملف في آنٍ واحد (jpg, png, pdf, doc).</small>
          </div>
        </div>
      </section>

      <!-- أزرار الإرسال والإلغاء -->
      <div class="form-actions">
        <button type="button" class="btn-secondary" id="btnCancel" data-translate="cancel">إلغاء / عودة</button>
        <button type="submit" class="btn-primary" data-translate="submit-ticket">إرسال التذكرة</button>
      </div>
    </form>
  </main>

  <script src="/frontend/js/language.js"></script>
  <script src="/frontend/js/ticekt.js"></script>
      <script src="/frontend/js/check-status.js"></script>

</body>
</html>

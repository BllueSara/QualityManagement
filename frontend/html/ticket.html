<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-translate="create-ticket-page-title">نظام إدارة الجودة والسلامة - إنشاء تذكرة</title>

  <!-- استيراد خط "Tajawal" من Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/shared.css"/>

  <!-- ربط ملف التنسيقات -->
  <link rel="stylesheet" href="/frontend/css/ticket.css" />
  <style>
    /* إخفاء المحتوى حتى يتم تحميل اللغة */
    .content-hidden {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-in-out;
    }

    .content-visible {
      opacity: 1;
      visibility: visible;
    }
  </style>
</head>
<body>
  <!-- الهيدر العلوي -->
  <header class="main-header content-hidden">
    <div class="header-container">
      <div class="system-title">
        <img src="/frontend/images/system-title.png" alt="نظام إدارة الجودة والسلامة">
      </div>
      <div class="hospital-logo">
        <img src="/frontend/images/hospital-logo.png" alt="شعار مستشفى الملك عبد العزيز">
      </div>
    </div>
  </header>
  <div class="header-actions content-hidden">
    <button class="back-btn" onclick="history.back()">
     <i class="fas fa-arrow-right" id="backIcon"></i>      <span data-translate="back">رجوع</span>
    </button>
    <button class="home-btn" onclick="window.location.href='index.html'">
      <i class="fas fa-home"></i>
      <span data-translate="home">الرئيسية</span>
    </button>
  </div>
  <!-- المحتوى الرئيسي -->
  <main class="content-wrapper content-hidden">
    <h1 class="page-title" data-translate="create-ticket">إنشاء تذكرة</h1>

    <form id="ticketForm" class="ticket-form" autocomplete="off">

      <!-- ===== قسم: وقت وموقع الحدث ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-time-location">وقت وموقع الحدث</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group required">
              <label for="eventDate" data-translate="event-date">تاريخ الحدث</label>
              <input type="date" id="eventDate" name="eventDate" placeholder="yyyy/mm/dd" data-translate-placeholder="placeholder-date" required />
            </div>
            <div class="form-group time-group required">
              <label for="eventTime" data-translate="event-time">وقت الحدث</label>
              <input type="time" id="eventTime" name="eventTime" step="1" required />
            </div>
          </div>

          <div class="form-group full-width required">
            <label for="eventLocation" data-translate="event-location">موقع الحدث</label>
            <input type="text" id="eventLocation" name="eventLocation" placeholder="ادخل موقع الحدث هنا" data-translate-placeholder="placeholder-event-location" required />
          </div>

          <div class="row">
            <div class="form-group required">
              <label for="reportingDept" data-translate="reporting-dept">القسم المبلغ</label>
              <select id="reportingDept" name="reportingDept" required>
<option value="" disabled selected data-translate="placeholder-select-dept">اختر القسم</option>
              </select>
            </div>
            <div class="form-group required">
              <label for="respondingDept" data-translate="responding-dept">القسم المستجيب</label>
              <select id="respondingDept" name="respondingDept" required>
<option value="" disabled selected data-translate="placeholder-select-dept">اختر القسم</option>
              </select>
            </div>
          </div>

          <div class="form-group full-width required">
            <label for="otherDepts" data-translate="other-depts">الأقسام الأخرى المعنية</label>
            <select id="otherDepts" name="otherDepts" required>
              <option value="" disabled selected data-translate="placeholder-select-dept">اختر القسم</option>
            </select>
          </div>
        </div>
      </section>

      <!-- ===== قسم: معلومات المريض (غير إلزامي) ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="patient-info">معلومات المريض</h2>
        <label for="patientInfoExtra" data-translate="patient-info-extra">معلومات المريض</label>
        <div class="section-content">
          <div class="row">
            <div class="form-group">
              <label for="patientName" data-translate="patient-name">اسم المريض</label>
              <input type="text" id="patientName" name="patientName" placeholder="ادخل اسم المريض" data-translate-placeholder="placeholder-patient-name" />
            </div>
            <div class="form-group">
              <label for="medicalRecordNo" data-translate="medical-record">رقم الملف الطبي</label>
              <input type="text" id="medicalRecordNo" name="medicalRecordNo" placeholder="ادخل رقم الملف الطبي" data-translate-placeholder="placeholder-medical-record" />
            </div>
          </div>
  
        </div>
      </section>

      <!-- ===== قسم: نوع البلاغ ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="report-type">نوع البلاغ</h2>
        <div class="section-content">
          <div class="form-group required radio-group full-width">
            <label data-translate="select-report-type">اختر نوع البلاغ</label>
            <div class="radio-options report-type-grid">
              <div>
                <input type="radio" id="reportAccident" name="reportType" value="حدث عارض" />
                <label for="reportAccident" data-translate="accident">حدث عارض</label>
              </div>
          
              <div>
              <input type="radio" id="reportSerious" name="reportType" value="حدث جسيم" />
              <label for="reportSerious" data-translate="serious">حدث جسيم</label>

              </div>
              <div>
                <input type="radio" id="reportCatch" name="reportType" value="إلتقاطة جيدة" />
                <label for="reportCatch" data-translate="good-catch">إلتقاطة جيدة</label>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- ===== قسم: تصنيف الحدث ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-classification">تصنيف الحدث</h2>
        <div class="section-content">
          <div class="form-group required full-width">
            <label data-translate="event-classification-category">اختر تصنيف الحدث (واحد على الأقل)</label>
            <div id="classificationOptions" class="classification-grid">
              <!-- سيتم تعبئتها ديناميكياً -->
            </div>
          </div>
        </div>
      </section>
      <!-- ===== قسم: وصف الحدث ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-description">وصف الحدث</h2>
        <div class="section-content">
          <div class="form-group full-width required">
            <label for="eventDescription" data-translate="event-description-step">وصف مفصل للحدث</label>
            <textarea id="eventDescription" name="eventDescription" rows="5" placeholder="اكتب وصفاً مفصلاً للحدث هنا" data-translate-placeholder="placeholder-event-description" required></textarea>
          </div>
        </div>
      </section>
      <!-- ===== قسم: الإجراءات المتخذة ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="actions-taken">الإجراءات المتخذة</h2>
        <div class="section-content">
          <div class="form-group full-width required">
            <label for="actionsTaken" data-translate="actions-taken-steps">صف الإجراءات التي تم اتخاذها</label>
            <textarea id="actionsTaken" name="actionsTaken" rows="4" placeholder="صف الإجراءات التي تم اتخاذها" data-translate-placeholder="placeholder-actions" required></textarea>
          </div>
        </div>
      </section>

      <!-- ===== قسم: رفع المرفقات (اختياري) ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="attachments">المرفقات</h2>
        <div class="section-content">
          <div class="form-group full-width">
            <label for="attachments" data-translate="upload-attachments">رفع المرفقات</label>
            <input type="file" id="attachments" name="attachments" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx" />
            <small data-translate="upload-hint">يمكنك رفع أكثر من ملف في آنٍ واحد (jpg, png, pdf, doc).</small>
          </div>
        </div>
      </section>
      
      <!-- ===== قسم: تصنيف مستوى الضرر ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="event-classification-level">تصنيف مستوى الضرر <span style="color:red">*</span></h2>
        <div class="section-content">
          <div class="form-group required full-width">
            <label data-translate="level-of-harm-desc"> اختر تصنيف مستوى الضرر الناتج عن الحدث العارض بناءً على البيان الموضح أعلاه</label>
            <div id="levelOfHarmOptions" class="level-harm-grid">
              <!-- سيتم تعبئتها ديناميكياً -->
            </div>
          </div>
        </div>
      </section>
      <!-- ===== قسم: معلومات المبلغ ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="reporter-info">معلومات المبلغ</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group">
              <label for="reporterName" data-translate="reporter-name">اسم المبلغ</label>
              <input type="text" id="reporterName" name="reporterName" placeholder="ادخل اسم المبلغ" data-translate-placeholder="placeholder-reporter-name" />
            </div>
            <!-- حذف حقل تاريخ الإبلاغ بالكامل -->
            <!-- <div class="form-group required">
              <label for="reportDate" data-translate="report-date">تاريخ الإبلاغ</label>
              <input type="date" id="reportDate" name="reportDate" placeholder="yyyy/mm/dd" data-translate-placeholder="placeholder-date" required />
            </div> -->
          </div>
          <div class="row">
            <div class="form-group">
              <label for="reporterPosition" data-translate="reporter-position">المسمي الوظيفي</label>
              <input type="text" id="reporterPosition" name="reporterPosition" placeholder="ادخل المسمي الوظيفي" data-translate-placeholder="placeholder-reporter-position" />
            </div>
            <div class="form-group">
              <label for="reporterPhone" data-translate="reporter-phone">رقم الجوال</label>
              <input type="tel" id="reporterPhone" name="reporterPhone" placeholder="05XXXXXXXX" data-translate-placeholder="placeholder-phone" />
            </div>
          </div>
          <div class="form-group full-width">
            <label for="reporterEmail" data-translate="reporter-email">البريد الإلكتروني</label>
            <input type="email" id="reporterEmail" name="reporterEmail" placeholder="example@domain.com" data-translate-placeholder="placeholder-email" />
          </div>
        </div>
      </section>




      <!-- ===== قسم: تفاصيل الإصابة (غير إلزامي) ===== -->
      <section class="form-section">
        <h2 class="section-title" data-translate="injury-details">تفاصيل الإصابة</h2>
        <div class="section-content">
          <div class="row">
            <div class="form-group">
              <label data-translate="had-injury">هل حدثت إصابة؟</label>
              <div class="radio-options">
                <input type="radio" id="injuryYes" name="hadInjury" value="نعم" />
                <label for="injuryYes" data-translate="yes">نعم</label>
                <input type="radio" id="injuryNo" name="hadInjury" value="لا" />
                <label for="injuryNo" data-translate="no">لا</label>
              </div>
            </div>
            <div class="form-group full-width">
              <label data-translate="injury-type">نوع الإصابة</label>
              <div class="radio-options">
                <input type="radio" id="injuryPhysical" name="injuryType" value="جسدية" />
                <label for="injuryPhysical" data-translate="physical">جسدية</label>
                <input type="radio" id="injuryPsychic" name="injuryType" value="نفسية" />
                <label for="injuryPsychic" data-translate="psychic">نفسية</label>
              </div>
            </div>
          </div>
        </div>
      </section>



      <!-- أزرار الإرسال والإلغاء -->
      <div class="form-actions">
        <button type="button" class="btn-secondary" id="btnCancel" data-translate="cancel">إلغاء / عودة</button>
        <button type="submit" class="btn-primary" data-translate="submit-ticket">إرسال التذكرة</button>
      </div>
    </form>
  </main>

  <script src="/frontend/js/language.js"></script>
  <script src="/frontend/js/ticekt.js"></script>
  <script src="/frontend/js/check-status.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // إظهار المحتوى بعد تحميل اللغة
      setTimeout(() => {
        const elements = document.querySelectorAll('.content-hidden');
        elements.forEach(element => {
          element.classList.remove('content-hidden');
          element.classList.add('content-visible');
        });
      }, 100);
    });
  </script>

</body>
</html>

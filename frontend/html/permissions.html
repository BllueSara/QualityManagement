<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="permissions-title">إدارة الصلاحيات</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        crossorigin="anonymous" />

    <link rel="stylesheet" href="../css/shared.css">
    <link rel="stylesheet" href="../css/permissions.css">
    <style>
        /* إخفاء المحتوى حتى يتم تحميل اللغة */
        .content-hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out;
        }

        .content-visible {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>

<body>
    <header class="main-header content-hidden">
        <div class="header-container">
            <div class="system-title">
                <img src="/frontend/images/system-title.png" alt="نظام إدارة الجودة والسلامة">
            </div>
            <div class="hospital-logo">
                <img src="/frontend/images/hospital-logo.png" alt="شعار مستشفى الملك عبد العزيز">
            </div>
        </div>
    </header>
    <div class="header-actions content-hidden">
        <button class="back-btn" onclick="history.back()">
     <i class="fas fa-arrow-right" id="backIcon"></i>            <span data-translate="back">رجوع</span>
        </button>
        <button class="home-btn" onclick="window.location.href='index.html'">
            <i class="fas fa-home"></i>
            <span data-translate="home">الرئيسية</span>
        </button>
    </div>
    <main class="content-hidden">
        <div class="permissions-container">
            <!-- Users Sidebar -->
  <div class="users-sidebar">
        <div class="search-bar">
          <input type="text" id="user-search" data-translate-placeholder="search-user" placeholder="بحث عن مستخدم" />
          <i class="fas fa-search search-icon"></i>
        </div>
        <button class="add-user-btn" id="add-user-btn"><i class="fas fa-user-plus"></i><span data-translate="add-user">إضافة مستخدم جديد</span></button>
        <button class="btn-primary" id="btn-manage-job-titles" style="margin-top: 10px;"><i class="fas fa-briefcase"></i><span data-translate="manage-job-titles">إدارة الناصب الإدارية</span></button>
        <button class="btn-primary" id="btn-manage-job-names" style="margin-top: 10px;"><i class="fas fa-user-tie"></i><span data-translate="manage-job-names">إدارة المسميات الوظيفية</span></button>
        <button class="btn-primary" id="btn-revoke-files" style="margin-top: 10px; display: none;"><i class="fas fa-file-export"></i> <span>سحب الملفات</span></button>
        <button class="btn-primary" id="btn-view-delegation-confirmations" style="margin-top: 10px;"><i class="fas fa-clipboard-check"></i> <span>عرض اقرارات التفويض</span></button>
        <div class="user-list" id="user-list">
          <!-- سيتم تحميل المستخدمين هنا ديناميكياً -->
        </div>
      </div>

            <!-- Permissions Content -->
           <div class="permissions-content">
<!-- قبل اختيار المستخدم -->
<div class="user-profile-header">
  <div class="action-buttons-top">
    <button class="btn-delete" id="btn-delete-user"><i class="fas fa-trash-alt"></i> <span data-translate="delete">حذف</span></button>
    <button class="btn-primary" id="btn-reset-password"><i class="fas fa-key"></i> <span data-translate="reset-password">إعادة تعيين كلمة المرور</span></button>
    <button class="btn-primary" id="btn-change-role"><i class="fas fa-users-cog"></i> <span data-translate="change-role">تغيير الدور</span></button>
    <button class="btn-primary" id="btn-clear-cache" style="display: none; background: #e53e3e;"><i class="fas fa-broom"></i> <span data-translate="clear-cache">مسح الكاش ميموري</span></button>
    <button class="btn-primary" id="btn-edit-user-info" style="display:none;"><i class="fas fa-user-edit"></i> <span data-translate="change-user-info">تغيير معلومات المستخدم</span></button>
  </div>

  <div class="profile-extra" id="profile-extra">
    <h2 id="profile-name"></h2>
    <span id="profile-status" class="status"></span>
    <span class="badge-pill dept-badge" id="profile-department"></span>
    <span class="badge-pill role-badge" id="profile-role"></span>
    <span class="badge-pill job-badge" id="profile-job-title"></span>
  </div>
</div>


                <h3 data-translate="access-permissions">صلاحيات الوصول</h3>

<div class="permission-section">
  <!-- الأقسام -->
     <!-- مجموعة جديدة: أجهزة التحكم العامة -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="general-group">عامّ</h4>
      <button class="btn-select-section" data-section="general" title="تحديد صلاحيات القسم العام">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="grant_permissions">منح الصلاحيات</div>
        </div>
      </div>
      <label class="switch" data-key="grant_permissions">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="grant_all_permissions">منح جميع الصلاحيات</div>
        </div>
      </div>
      <label class="switch" data-key="grant_all_permissions">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_tickets"> اخفاء التذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="disable_tickets">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_departments"> اخفاء الاقسام</div>
        </div>
      </div>
      <label class="switch" data-key="disable_departments">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_approvals">اخفاء الاعتمادات</div>
        </div>
      </div>
      <label class="switch" data-key="disable_approvals">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_comittees"> اخفاء اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="disable_comittees">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_logs">عرض السجلات</div>
        </div>
      </div>
      <label class="switch" data-key="view_logs">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_dashboard">عرض لوحة التحكم</div>
        </div>
      </div>
      <label class="switch" data-key="view_dashboard">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
        <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_reports">عرض التقارير </div>
        </div>
      </div>
      <label class="switch" data-key="view_reports">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
        <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_notifications">إلغاء الإشعارات</div>
        </div>
      </div>
      <label class="switch" data-key="disable_notifications">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_emails">إلغاء الإيميلات</div>
        </div>
      </div>
      <label class="switch" data-key="disable_emails">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="disable_logs">إلغاء اللوقز</div>
        </div>
      </div>
      <label class="switch" data-key="disable_logs">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
 <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="revoke_delegations"> الغاء تفويض بالنيابة عن جميع الملفات </div>
        </div>
      </div>
      <label class="switch" data-key="revoke_delegations">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="revoke_files">سحب الملفات</div>
        </div>
      </div>
      <label class="switch" data-key="revoke_files">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="clear_cache">مسح الكاش ميموري</div>
        </div>
      </div>
      <label class="switch" data-key="clear_cache">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_delegation_confirmations">عرض اقرارات التفويض</div>
        </div>
      </div>
      <label class="switch" data-key="view_delegation_confirmations">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>





  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="departments-group">الأقسام</h4>
      <button class="btn-select-section" data-section="departments" title="تحديد صلاحيات الأقسام">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_own_department">عرض القسم الموجود</div>
        </div>
      </div>
      <label class="switch" data-key="view_own_department">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_section">إضافة قسم</div>
        </div>
      </div>
      <label class="switch"data-key="add_section">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_section">تعديل قسم</div>
        </div>
      </div>
      <label class="switch"data-key="edit_section">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_section">حذف قسم</div>
        </div>
      </div>
      <label class="switch" data-key="delete_section">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>

  <!-- المحتوى -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="folder-group">المجلد</h4>
      <button class="btn-select-section" data-section="folder" title="تحديد صلاحيات المجلد">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_folder">إضافة مجلد</div>
        </div>
      </div>
      <label class="switch"data-key="add_folder">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_folder_name">إضافة اسم مجلد</div>
        </div>
      </div>
      <label class="switch"data-key="add_folder_name">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_folder">تعديل مجلد</div>
        </div>
      </div>
      <label class="switch" data-key="edit_folder">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_folder_name">تعديل اسم مجلد</div>
        </div>
      </div>
      <label class="switch" data-key="edit_folder_name">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_folder">حذف مجلد</div>
        </div>
      </div>
      <label class="switch" data-key="delete_folder">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_folder_name">حذف اسم مجلد</div>
        </div>
      </div>
      <label class="switch" data-key="delete_folder_name">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="content-group">المحتوى</h4>
      <button class="btn-select-section" data-section="content" title="تحديد صلاحيات المحتوى">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_content">إضافة محتوى</div>
        </div>
      </div>
      <label class="switch"data-key="add_content">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_old_content">إضافة محتوى قديم</div>
        </div>
      </div>
      <label class="switch"data-key="add_old_content">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_content">تعديل  محتوى</div>
        </div>
      </div>
      <label class="switch" data-key="edit_content">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_content">حذف محتوى</div>
        </div>
      </div>
      <label class="switch" data-key="delete_content">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

  </div>

  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="committees-group">اللجان</h4>
      <button class="btn-select-section" data-section="committees" title="تحديد صلاحيات اللجان">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_own_committees">عرض اللجان الحالية</div>
        </div>
      </div>
      <label class="switch" data-key="view_own_committees">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
      <div class="committees-dropdown" id="committees-dropdown" style="display: none;">
        <button class="dropdown-btn" type="button">
          <span data-translate="select-committees">اختر اللجان</span>
          <i class="fas fa-chevron-down"></i>
        </button>
        <div class="dropdown-content">
          <div class="search-box">
            <input type="text" placeholder="ابحث عن لجنة..." class="committee-search">
          </div>
          <div class="committees-list">
            <!-- سيتم تحميل اللجان هنا ديناميكياً -->
          </div>
        </div>
      </div>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_committee">إضافة لجنة</div>
        </div>
      </div>
      <label class="switch"data-key="add_committee">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_committee">تعديل لجنة</div>
        </div>
      </div>
      <label class="switch"data-key="edit_committee">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_committee">حذف لجنة</div>
        </div>
      </div>
      <label class="switch" data-key="delete_committee">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>

  <!-- المحتوى -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="committee-folders-group">مجلدات اللجان</h4>
      <button class="btn-select-section" data-section="committee-folders" title="تحديد صلاحيات مجلدات اللجان">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_folder_committee">إضافة مجلد اللجان</div>
        </div>
      </div>
      <label class="switch"data-key="add_folder_committee">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_folder_committee_name">إضافة اسم مجلد اللجان</div>
        </div>
      </div>
      <label class="switch"data-key="add_folder_committee_name">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_folder_committee">تعديل مجلد اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="edit_folder_committee">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_folder_committee_name">تعديل اسم مجلد اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="edit_folder_committee_name">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_folder_committee">حذف مجلد اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="delete_folder_committee">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_folder_committee_name">حذف اسم مجلد اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="delete_folder_committee_name">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="committee-content-group">محتوى اللجان</h4>
      <button class="btn-select-section" data-section="committee-content" title="تحديد صلاحيات محتوى اللجان">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_content_committee">إضافة محتوى اللجان</div>
        </div>
      </div>
      <label class="switch"data-key="add_content_committee">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_approved_content_committee">إضافة محتوى  معتمد للجان</div>
        </div>
      </div>
      <label class="switch"data-key="add_approved_content_committee">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_content_committee">تعديل  محتوى اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="edit_content_committee">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_content_committee">حذف محتوى اللجان</div>
        </div>
      </div>
      <label class="switch" data-key="delete_content_committee">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  
  </div>

  <!-- التذاكر -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="tickets-group">التذاكر</h4>
      <button class="btn-select-section" data-section="tickets" title="تحديد صلاحيات التذاكر">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_tickets">عرض كل التذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="view_tickets">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="transfer_tickets">تحويل تذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="transfer_tickets" >
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="track_tickets">تتبع التذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="track_tickets">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_ticket">حذف التذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="delete_ticket">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="edit_ticket">تعديل التذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="edit_ticket">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="manage_ovr_settings">إدارة إعدادات الأحداث العارضة</div>
        </div>
      </div>
      <label class="switch" data-key="manage_ovr_settings">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>

  
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="report-group-tickets">تقارير التذاكر</h4>
      <button class="btn-select-section" data-section="ticket-reports" title="تحديد صلاحيات تقارير التذاكر">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_reports_by_person_tickets"> عرض تقارير التذاكر للشخص</div>
        </div>
      </div>
      <label class="switch"data-key="view_reports_by_person_tickets">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_all_reports_tickets">عرض كل تقارير التذاكر </div>
        </div>
      </div>
      <label class="switch"data-key="view_all_reports_tickets">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="download_reports_tickets"> تحميل تقارير التذاكر</div>
        </div>
      </div>
      <label class="switch" data-key="download_reports_tickets">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
  <!-- الاعتمادات -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="approvals-group">الاعتمادات</h4>
      <button class="btn-select-section" data-section="approvals" title="تحديد صلاحيات الاعتمادات">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_credits">عرض كل الاعتمادات</div>
        </div>
      </div>
      <label class="switch" data-key="view_credits" >
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="transfer_credits">تحويل اعتمادات</div>
        </div>
      </div>
      <label class="switch" data-key="transfer_credits">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="track_credits">تتبع اعتمادات</div>
        </div>
      </div>
      <label class="switch" data-key="track_credits">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
  
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="report-group-approvals">تقارير الاعتمادات</h4>
      <button class="btn-select-section" data-section="approval-reports" title="تحديد صلاحيات تقارير الاعتمادات">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>

    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_reports_by_person_approvals"> عرض تقارير الاعتمادات للشخص</div>
        </div>
      </div>
      <label class="switch"data-key="view_reports_by_person_approvals">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="view_all_reports_approvals">عرض كل تقارير الاعتمادات </div>
        </div>
      </div>
      <label class="switch"data-key="view_all_reports_approvals">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="download_reports_approvals"> تحميل تقارير الاعتمادات</div>
        </div>
      </div>
      <label class="switch" data-key="download_reports_approvals">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>

  <!-- التوقيع -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="signature-group">التوقيع</h4>
      <button class="btn-select-section" data-section="signature" title="تحديد صلاحيات التوقيع">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="sign_elctronic">اعتماد الكتروني</div>
        </div>
      </div>
      <label class="switch" data-key="sign">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="sign_on_behalf">توقيع بالنيابة</div>
        </div>
      </div>
      <label class="switch" data-key="sign_on_behalf">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delegate_all">تفويض بالنيابة عن جميع الملفات </div>
        </div>
      </div>
      <label class="switch" data-key="delegate_all">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
   
  </div>

  <!-- الحسابات -->
  <div class="permission-group">
    <div class="group-header">
      <h4 class="group-title" data-translate="accounts-group">الحسابات</h4>
      <button class="btn-select-section" data-section="accounts" title="تحديد صلاحيات الحسابات">
        <i class="fas fa-check-double"></i>
        <span data-translate="select-section">تحديد القسم</span>
      </button>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="add_user">إضافة مستخدم</div>
        </div>
      </div>
      <label class="switch" data-key="add_user">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="change_status"> تغغير حالة المستخدم</div>
        </div>
      </div>
      <label class="switch" data-key="change_status">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="change_role">تغيير الدور</div>
        </div>
      </div>
      <label class="switch" data-key="change_role">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="delete_user">حذف حساب</div>
        </div>
      </div>
      <label class="switch" data-key="delete_user">
        <input type="checkbox" >
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="change_password">تغيير كلمة السر</div>
        </div>
      </div>
      <label class="switch"data-key="change_password">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
    <div class="permission-item">
      <div class="permission-details">
        <div class="text-content">
          <div class="permission-title" data-translate="change_user_info">تغيير معلومات المستخدم</div>
        </div>
      </div>
      <label class="switch"data-key="change_user_info">
        <input type="checkbox">
        <span class="slider round"></span>
      </label>
    </div>
  </div>
</div>





            </div>
        </div>
    </main>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title" data-translate="add-user-title">إضافة مستخدم جديد</h2>

            <div class="modal-section">
                <h3 data-translate="user-info">معلومات المستخدم</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="userName" data-translate="first-name-label">الاسم الأول *</label>
                        <input type="text" id="userName" data-translate-placeholder="first-name-placeholder" placeholder="أدخل الاسم الأول" required>
                    </div>
                    <div class="form-group">
                        <label for="userLastName" data-translate="last-name-label">اسم العائلة *</label>
                        <input type="text" id="userLastName" data-translate-placeholder="last-name-placeholder" placeholder="أدخل اسم العائلة" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="userSecondName" data-translate="second-name-label">الاسم الثاني</label>
                        <input type="text" id="userSecondName" data-translate-placeholder="second-name-placeholder" placeholder="أدخل الاسم الثاني">
                    </div>
                    <div class="form-group">
                        <label for="userThirdName" data-translate="third-name-label">الاسم الثالث</label>
                        <input type="text" id="userThirdName" data-translate-placeholder="third-name-placeholder" placeholder="أدخل الاسم الثالث">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="username" data-translate="username-label">اسم المستخدم *</label>
                        <input type="text" id="username" data-translate-placeholder="username-placeholder" placeholder="أدخل اسم المستخدم" required>
                    </div>
                    <div class="form-group">
                        <label for="password" data-translate="password-label">كلمة المرور</label>
                        <input type="password" id="password" data-translate-placeholder="password-placeholder" placeholder="أدخل كلمة المرور">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="employeeNumber" data-translate="employee-number-label">الرقم الوظيفي</label>
                        <input type="text" id="employeeNumber" data-translate-placeholder="employee-number-placeholder" placeholder="أدخل الرقم الوظيفي">
                    </div>
                    <div class="form-group">
                        <label for="jobTitle" data-translate="job-title-label">المنصب الإداري</label>
                        <select id="jobTitle" required>
                            <option value="" data-translate="select-job-title">اختر المنصب الإداري</option>
                            <option value="__ADD_NEW_JOB_TITLE__" data-translate="add-new-job-title">إضافة منصب إداري جديد</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="jobName" data-translate="job-name-label">المسمى الوظيفي</label>
                        <select id="jobName" required>
                            <option value="" data-translate="select-job-name">اختر المسمى الوظيفي</option>
                            <option value="__ADD_NEW_JOB_NAME__" data-translate="add-new-job-name">إضافة مسمى وظيفي جديد</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="department" data-translate="department-label">القسم</label>
                        <select id="department">
                            <option value="" data-translate="select-department">اختر القسم</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="email" data-translate="email-label">البريد الإلكتروني</label>
                        <input type="email" id="email" data-translate-placeholder="email-placeholder" placeholder="أدخل البريد الإلكتروني">
                    </div>
                </div>
            </div>

    <!-- Permissions section removed as per user request -->

            <div class="modal-actions">
                <button class="btn-secondary" id="cancelAddUser"><span data-translate="cancel">إلغاء</span></button>
                <button class="btn-primary" id="saveUser"><span data-translate="save-user">حفظ المستخدم</span></button>
            </div>
        </div>
    </div>
<div id="role-popup" class="role-popup">
  <div class="role-content">
    <h4 data-translate="choose-role">اختر الدور</h4>
    <select id="role-select" class="role-select"></select>
    <div class="role-buttons">
      <button class="btn-primary" id="btn-save-role"><span data-translate="save">حفظ</span></button>
      <button class="btn-secondary" id="btn-cancel-role"><span data-translate="cancel">إلغاء</span></button>
    </div>
  </div>
</div>

<div id="editUserModal" class="modal">
  <div class="modal-content">
    <h2 class="modal-title" data-translate="change-user-info">تعديل معلومات المستخدم</h2>
    <div class="modal-section">
      <h3 data-translate="user-info">معلومات المستخدم</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="editFirstName" data-translate="first-name-label">الاسم الأول *</label>
          <input type="text" id="editFirstName" data-translate-placeholder="first-name-placeholder" placeholder="أدخل الاسم الأول" required>
        </div>
        <div class="form-group">
          <label for="editLastName" data-translate="last-name-label">اسم العائلة *</label>
          <input type="text" id="editLastName" data-translate-placeholder="last-name-placeholder" placeholder="أدخل اسم العائلة" required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="editSecondName" data-translate="second-name-label">الاسم الثاني</label>
          <input type="text" id="editSecondName" data-translate-placeholder="second-name-placeholder" placeholder="أدخل الاسم الثاني">
        </div>
        <div class="form-group">
          <label for="editThirdName" data-translate="third-name-label">الاسم الثالث</label>
          <input type="text" id="editThirdName" data-translate-placeholder="third-name-placeholder" placeholder="أدخل الاسم الثالث">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="editUsername" data-translate="username-label">اسم المستخدم *</label>
          <input type="text" id="editUsername" data-translate-placeholder="username-placeholder" placeholder="أدخل اسم المستخدم" required>
        </div>
        <div class="form-group">
          <label for="editEmail" data-translate="email-label">البريد الإلكتروني</label>
          <input type="email" id="editEmail" data-translate-placeholder="email-placeholder" placeholder="أدخل البريد الإلكتروني">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="editEmployeeNumber" data-translate="employee-number-label">الرقم الوظيفي</label>
          <input type="text" id="editEmployeeNumber" data-translate-placeholder="employee-number-placeholder" placeholder="أدخل الرقم الوظيفي">
        </div>
        <div class="form-group">
          <label for="editNationalId" data-translate="national-id">رقم الهوية الوطنية / الإقامة</label>
          <input type="text" id="editNationalId" data-translate-placeholder="enter-national-id" placeholder="أدخل رقم الهوية الوطنية أو الإقامة" maxlength="10" pattern="[0-9]{10}">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
                                  <label for="editJobTitle" data-translate="job-title-label">المنصب الإداري</label>
          <select id="editJobTitle" required>
                          <option value="" data-translate="select-job-title">اختر المنصب الإداري</option>
          </select>
        </div>
        <div class="form-group">
          <label for="editJobName" data-translate="job-name-label">المسمى الوظيفي</label>
          <select id="editJobName" required>
            <option value="" data-translate="select-job-name">اختر المسمى الوظيفي</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="editDepartment" data-translate="department-label">القسم</label>
          <select id="editDepartment">
            <option value="" data-translate="select-department">اختر القسم</option>
          </select>
        </div>
      </div>


    </div>
    <div class="modal-actions">
      <button class="btn-secondary" id="cancelEditUser"><span data-translate="cancel">إلغاء</span></button>
      <button class="btn-primary" id="saveEditUser"><span data-translate="save-user">حفظ التعديلات</span></button>
    </div>
  </div>
</div>
        <script src="/frontend/js/language.js"></script>
        <script src="../js/permissions.js"></script>
        <script src="../js/check-status.js"></script>
<script src="../js/utils.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                // إظهار المحتوى بعد تحميل اللغة
                setTimeout(() => {
                    const elements = document.querySelectorAll('.content-hidden');
                    elements.forEach(element => {
                        element.classList.remove('content-hidden');
                        element.classList.add('content-visible');
                    });
                }, 100);
            });
        </script>
        
        <!-- Job Titles Management Modal -->
        <div id="jobTitlesModal" class="modal">
            <div class="modal-content">
                <h2 class="modal-title" data-translate="manage-job-titles">إدارة المسميات الوظيفية</h2>
                
                <div class="modal-section">
                    <div class="job-titles-header">
                        <button class="btn-primary" id="btn-add-job-title"><i class="fas fa-plus"></i><span data-translate="add-job-title">إضافة مسمى وظيفي</span></button>
                    </div>
                    
                    <div class="job-titles-list" id="jobTitlesList">
                        <!-- سيتم تحميل المسميات الوظيفية هنا -->
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelJobTitles"><span data-translate="close">إغلاق</span></button>
                </div>
            </div>
        </div>

        <!-- Add/Edit Job Title Modal -->
        <div id="addEditJobTitleModal" class="modal">
            <div class="modal-content">
                <h2 class="modal-title" id="addEditJobTitleTitle" data-translate="add-job-title">إضافة مسمى وظيفي</h2>
                
                <div class="modal-section">
                    <div class="form-group">
                        <label for="jobTitleName" data-translate="job-title-name">المنصب الإداري</label>
                        <input type="text" id="jobTitleName" data-translate-placeholder="enter-job-title" placeholder="أدخل المنصب الإداري" required>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelAddEditJobTitle"><span data-translate="cancel">إلغاء</span></button>
                    <button class="btn-primary" id="saveJobTitle"><span data-translate="save">حفظ</span></button>
                </div>
            </div>
        </div>

        <!-- Add New Job Title Modal (for user registration) -->
        <div id="addJobTitleModal" class="modal-overlay">
            <div class="modal-content">
                <h3 data-translate="add-job-title">إضافة مسمى وظيفي</h3>
                <hr>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="jobTitleNameForUser" data-translate="job-title-name">المنصب الإداري</label>
                        <input type="text" id="jobTitleNameForUser" placeholder="أدخل المنصب الإداري">
                    </div>
                </div>
                <div class="modal-buttons">
                    <button class="btn-primary" id="saveAddJobTitle" data-translate="save">حفظ</button>
                    <button class="btn-secondary" id="cancelAddJobTitle" data-translate="cancel">إلغاء</button>
                </div>
            </div>
        </div>

        <!-- Job Names Management Modal -->
        <div id="jobNamesModal" class="modal">
            <div class="modal-content">
                <h2 class="modal-title" data-translate="manage-job-names">إدارة المسميات الوظيفية</h2>
                
                <div class="modal-section">
                    <div class="job-names-header">
                        <button class="btn-primary" id="btn-add-job-name"><i class="fas fa-plus"></i><span data-translate="add-job-name">إضافة مسمى وظيفي</span></button>
                    </div>
                    
                    <div class="job-names-list" id="jobNamesList">
                        <!-- سيتم تحميل المسميات الوظيفية هنا -->
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelJobNames"><span data-translate="close">إغلاق</span></button>
                </div>
            </div>
        </div>

        <!-- Add/Edit Job Name Modal -->
        <div id="addEditJobNameModal" class="modal">
            <div class="modal-content">
                <h2 class="modal-title" id="addEditJobNameTitle" data-translate="add-job-name">إضافة مسمى وظيفي</h2>
                
                <div class="modal-section">
                    <div class="form-group">
                        <label for="jobNameName" data-translate="job-name-name">المسمى الوظيفي</label>
                        <input type="text" id="jobNameName" data-translate-placeholder="enter-job-name" placeholder="أدخل المسمى الوظيفي" required>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancelAddEditJobName"><span data-translate="cancel">إلغاء</span></button>
                    <button class="btn-primary" id="saveJobName"><span data-translate="save">حفظ</span></button>
                </div>
            </div>
        </div>

        <!-- Add New Job Name Modal (for user registration) -->
        <div id="addJobNameModal" class="modal-overlay">
            <div class="modal-content">
                <h3 data-translate="add-job-name">إضافة مسمى وظيفي</h3>
                <hr>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="jobNameNameForUser" data-translate="job-name-name">المسمى الوظيفي</label>
                        <input type="text" id="jobNameNameForUser" placeholder="أدخل المسمى الوظيفي">
                    </div>
                </div>
                <div class="modal-buttons">
                    <button class="btn-primary" id="saveAddJobName" data-translate="save">حفظ</button>
                    <button class="btn-secondary" id="cancelAddJobName" data-translate="cancel">إلغاء</button>
                </div>
            </div>
        </div>
        
        <!-- Delegation Confirmations Modal -->
        <div id="delegationConfirmationsModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <h3>اقرارات التفويض</h3>
    <hr>
    <div class="modal-body">
      <div id="delegationConfirmationsList" class="delegation-confirmations-list">
        <!-- سيتم تحميل اقرارات التفويض هنا -->
      </div>
    </div>
    <div class="modal-buttons">
      <button class="btn-secondary" onclick="closeDelegationConfirmationsModal()">إغلاق</button>
    </div>
  </div>
</div>


        


        <div id="toast-container" class="toast-container"></div>

</body>

</html>